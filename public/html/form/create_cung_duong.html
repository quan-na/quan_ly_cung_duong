<h1 lang="en">Create cung duong</h1>
<div class="panel panel-default">
    <div class="panel-heading" lang="en">Phat tu information</div>
    <div class="panel-body">
        <form role="form" class="phat_tu_info-form">
            <div class="row">
                <div class="form-group col-sm-6" autoload="text_input" attribute="name"/>
                <div class="form-group col-sm-6" autoload="text_input" attribute="phap_danh"/>
            </div>
            <div class="row">
                <div class="form-group col-sm-6" autoload="text_input" attribute="phone"/>
                <div class="form-group col-sm-6" autoload="text_input" attribute="email"/>
            </div>
            <div class="btn-toolbar" role="toolbar" aria-label="...">
                <div autoload="button" attribute="create_pt_button" class="btn-group pull-right" role="group" aria-label="..."></div>
                <div autoload="button" attribute="search_pt_button" class="btn-group pull-right" role="group" aria-label="..."></div>
            </div>
        </form>
        <div class="row">
            <div class="col-sm-12 table-responsive" autoload="data_grid" attribute="phat_tu_grid"/>
        </div>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading" lang="en">Cung duong information</div>
    <div class="panel-body">
        <form role="form" class="cung_duong_info-form">
            <div class="row">
                <div class="form-group col-sm-6" autoload="text_input" attribute="tinh_tai"/>
                <div class="form-group col-sm-6" autoload="text_input" attribute="tinh_vat"/>
            </div>
            <div class="row">
                <div class="form-group col-sm-6" autoload="text_input" attribute="tong_cung_duong"/>
                <div class="form-group col-sm-6" autoload="text_input" attribute="ghi_chu"/>
            </div>
            <div class="btn-toolbar" role="toolbar" aria-label="...">
                <div autoload="button" attribute="create_cd_button" class="btn-group pull-right" role="group" aria-label="..."></div>
            </div>
        </form>
    </div>
</div>
===to-lead-people_walk-behind-them===
//<script type='text/javascript'>
   function ( tag, options ) {
       var _this = { searchForm: {}};
       globalControl.autoLoadForm($(tag), {
           name: { label: "Name", name: "name" },
           phap_danh: { label: "Phap danh", name: "phap_danh" },
           phone: { label: "Phone", name: "phone" },
           email: { label: "Email", name: "email" },
           tinh_tai: { label: "Tinh tai", name: "tinh_tai" },
           tinh_vat: { label: "Tinh vat", name: "tinh_vat" },
           tong_cung_duong: { label: "Tong cung duong", name: "tong_cung_duong" },
           ghi_chu: { label: "Ghi chu", name: "ghi_chu" },
           search_pt_button: {
               label: "Search phat tu",
               callback: function(btTag) {
                   $(btTag).filter("button").click(function() {
                       _this.searchForm = $(tag).find("form.phat_tu_info-form").serializeObject();
                       $(tag).find("div.table-responsive > table").bootgrid('reload');
                   });
               }
           },
           create_pt_button: {
               label: "Create phat tu",
               callback: function(btTag) {
                   $(btTag).filter("button").click(function() {
                       var form = $(tag).find("form.phat_tu_info-form").serializeObject();
                       // check if name is inputed
                       if (!(form['name'] || form['phap_danh'])) {
                           bootbox.dialog({
                               message: globalControl.lang.translate("Name or Phap danh is required."),
                               buttons: {
                                   ok: {
                                       label: globalControl.lang.translate("OK"),
                                       className: "btn",
                                       callback: function() {}
                                   }
                               }
                           });
                       } else { // message warning
                           bootbox.dialog({
                               message: globalControl.lang.translate("Are you sure you want to create new phat tu?"),
                               buttons: {
                                   yes: {
                                       label: globalControl.lang.translate("Yes"),
                                       className: "btn",
                                       callback: function() {
                                           globalControl.doAjax('/phat_tu/create', form,
                                                                function(data) {
                                                                    if (data.result == 'ok') {
                                                                        // TODO clear form
                                                                        // reload grid
                                                                        _this.searchForm = form;
                                                                        $(tag).find("div.table-responsive > table").bootgrid('reload');
                                                                    } else {
                                                                        // alert message
                                                                        bootbox.dialog({
                                                                            message: globalControl.lang.translate(data.message),
                                                                            buttons: {
                                                                                ok: {
                                                                                    label: globalControl.lang.translate("OK"),
                                                                                    className: "btn",
                                                                                    callback: function() {}
                                                                                }
                                                                            }
                                                                        });
                                                                    }
                                                                });
                                       }
                                   },
                                   no: {
                                       label: globalControl.lang.translate("No"),
                                       className: "btn",
                                       callback: function() { /* nope */ }
                                   }
                               }
                           });
                       }
                   });
               }
           },
           create_cd_button: {
               label: "Create cung duong",
               callback: function(btTag) {
               }
           },
           phat_tu_grid: {
               identifier: 'id',
               headerObj:{
                   'id': "Id",
                   'name': "Name",
                   'phap_danh': "Phap danh",
                   'phone': "Phone",
                   'email': "Email"
               },
               dataUrl: '/phat_tu/list',
               selection: 'single',
               onGetForm: function() {
                   return _this.searchForm;
               }
           }
       });
   }
//</script>
